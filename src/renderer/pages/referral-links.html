<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Links de Indica√ß√£o - FastBot</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .referrals-container {
      padding: 20px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .stats-panel {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: rgba(30, 30, 30, 0.8);
      border: 1px solid #444;
      border-radius: 8px;
      padding: 25px;
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .stat-icon {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
    }

    .stat-icon.total {
      background: rgba(52, 152, 219, 0.2);
      color: #3498db;
    }

    .stat-icon.active {
      background: rgba(46, 204, 113, 0.2);
      color: #2ecc71;
    }

    .stat-icon.inactive {
      background: rgba(149, 165, 166, 0.2);
      color: #95a5a6;
    }

    .stat-info h3 {
      color: #888;
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stat-info p {
      color: #fff;
      font-size: 32px;
      font-weight: 700;
      margin: 0;
    }

    .actions-bar {
      background: rgba(30, 30, 30, 0.8);
      border: 1px solid #444;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      display: flex;
      gap: 15px;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .search-box {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 1;
      max-width: 400px;
    }

    .search-box input {
      flex: 1;
      background: #1a1a1a;
      border: 1px solid #444;
      border-radius: 6px;
      color: #fff;
      padding: 10px 15px;
      font-size: 14px;
      outline: none;
    }

    .search-box input:focus {
      border-color: #d4af37;
    }

    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s;
    }

    .btn-add {
      background: linear-gradient(135deg, #d4af37 0%, #c49a2a 100%);
      color: #1a1a1a;
    }

    .btn-add:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
    }

    .btn-delete-all {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      color: #fff;
    }

    .btn-delete-all:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
    }

    .table-panel {
      background: rgba(30, 30, 30, 0.8);
      border: 1px solid #444;
      border-radius: 8px;
      padding: 25px;
      overflow-x: auto;
    }

    .table-panel h2 {
      color: #d4af37;
      font-size: 18px;
      margin-bottom: 20px;
      border-bottom: 1px solid #444;
      padding-bottom: 10px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    thead {
      background: #1a1a1a;
    }

    thead th {
      color: #d4af37;
      font-size: 13px;
      font-weight: 600;
      text-align: left;
      padding: 15px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      border-bottom: 2px solid #444;
    }

    tbody tr {
      border-bottom: 1px solid #333;
      transition: background 0.2s;
    }

    tbody tr:hover {
      background: rgba(212, 175, 55, 0.05);
    }

    tbody td {
      padding: 15px;
      color: #ccc;
      font-size: 14px;
    }

    .link-url {
      color: #3498db;
      font-family: monospace;
      font-size: 13px;
      max-width: 400px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: block;
    }

    .status-badge {
      padding: 5px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      display: inline-block;
    }

    .status-active {
      background: rgba(46, 204, 113, 0.2);
      color: #2ecc71;
    }

    .status-inactive {
      background: rgba(149, 165, 166, 0.2);
      color: #95a5a6;
    }

    .btn-table {
      padding: 6px 14px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.2s;
      margin-right: 5px;
    }

    .btn-copy {
      background: rgba(52, 152, 219, 0.2);
      color: #3498db;
      border: 1px solid #3498db;
    }

    .btn-copy:hover {
      background: rgba(52, 152, 219, 0.4);
    }

    .btn-toggle {
      background: rgba(241, 196, 15, 0.2);
      color: #f1c40f;
      border: 1px solid #f1c40f;
    }

    .btn-toggle:hover {
      background: rgba(241, 196, 15, 0.4);
    }

    .btn-edit {
      background: rgba(155, 89, 182, 0.2);
      color: #9b59b6;
      border: 1px solid #9b59b6;
    }

    .btn-edit:hover {
      background: rgba(155, 89, 182, 0.4);
    }

    .btn-delete {
      background: rgba(231, 76, 60, 0.2);
      color: #e74c3c;
      border: 1px solid #e74c3c;
    }

    .btn-delete:hover {
      background: rgba(231, 76, 60, 0.4);
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #666;
    }

    .empty-state svg {
      width: 100px;
      height: 100px;
      margin-bottom: 20px;
      opacity: 0.3;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: #1a1a1a;
      border: 1px solid #444;
      border-radius: 12px;
      padding: 30px;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-content h2 {
      color: #d4af37;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      color: #d4af37;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      background: #0d0d0d;
      border: 1px solid #444;
      border-radius: 6px;
      color: #fff;
      padding: 12px 15px;
      font-size: 14px;
      outline: none;
    }

    .form-group textarea {
      min-height: 80px;
      resize: vertical;
      font-family: monospace;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      border-color: #d4af37;
    }

    .form-group small {
      display: block;
      color: #888;
      font-size: 12px;
      margin-top: 5px;
    }

    .modal-actions {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 25px;
    }

    .btn-cancel {
      background: #333;
      color: #fff;
    }

    .btn-cancel:hover {
      background: #444;
    }

    .usage-count {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 4px 10px;
      background: rgba(52, 152, 219, 0.1);
      border: 1px solid rgba(52, 152, 219, 0.3);
      border-radius: 8px;
      color: #3498db;
      font-size: 12px;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <aside class="sidebar" id="sidebar"></aside>

    <main class="main-content">
      <header class="titlebar" id="titlebar"></header>

      <div class="referrals-container">
        <h1 style="color: #d4af37; margin-bottom: 30px;">üîó Links de Indica√ß√£o</h1>

        <!-- Statistics -->
        <div class="stats-panel">
          <div class="stat-card">
            <div class="stat-icon total">üìä</div>
            <div class="stat-info">
              <h3>Total de Links</h3>
              <p id="stat-total">0</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon active">‚úì</div>
            <div class="stat-info">
              <h3>Ativos</h3>
              <p id="stat-active">0</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon inactive">üìà</div>
            <div class="stat-info">
              <h3>Total de Usos</h3>
              <p id="stat-usage">0</p>
            </div>
          </div>
        </div>

        <!-- Actions Bar -->
        <div class="actions-bar">
          <div class="search-box">
            <input type="text" id="search-input" placeholder="Buscar por plataforma ou descri√ß√£o..." onkeyup="filterLinks()">
          </div>

          <div style="display: flex; gap: 10px;">
            <button class="btn btn-add" onclick="openAddModal()">
              ‚ûï Adicionar Link
            </button>
            <button class="btn btn-delete-all" onclick="deleteAllLinks()">
              üóëÔ∏è Excluir Todos
            </button>
          </div>
        </div>

        <!-- Links Table -->
        <div class="table-panel">
          <h2>Links Cadastrados (<span id="links-count">0</span>)</h2>

          <div id="links-table-container">
            <div class="empty-state">
              <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
              </svg>
              <h3>Nenhum link de indica√ß√£o cadastrado</h3>
              <p>Clique em "Adicionar Link" para come√ßar</p>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Add/Edit Modal -->
  <div class="modal" id="link-modal">
    <div class="modal-content">
      <h2 id="modal-title">‚ûï Adicionar Link de Indica√ß√£o</h2>

      <form id="link-form" onsubmit="saveLink(event)">
        <div class="form-group">
          <label for="platform">Plataforma / Casa *</label>
          <input type="text" id="platform" required placeholder="Ex: Betano, Bet365, Blaze, etc.">
          <small>Nome da plataforma para identifica√ß√£o</small>
        </div>

        <div class="form-group">
          <label for="referral-url">URL de Indica√ß√£o *</label>
          <input type="url" id="referral-url" required placeholder="https://...">
          <small>Link completo com c√≥digo de indica√ß√£o</small>
        </div>

        <div class="form-group">
          <label for="description">Descri√ß√£o</label>
          <textarea id="description" placeholder="Informa√ß√µes adicionais sobre este link..."></textarea>
          <small>Opcional: Notas sobre b√¥nus, condi√ß√µes, etc.</small>
        </div>

        <div class="form-group">
          <label for="priority">Prioridade</label>
          <select id="priority">
            <option value="1">Baixa</option>
            <option value="2">M√©dia</option>
            <option value="3" selected>Alta</option>
            <option value="4">Muito Alta</option>
            <option value="5">Priorit√°ria</option>
          </select>
          <small>Links com maior prioridade aparecem primeiro na sele√ß√£o</small>
        </div>

        <div class="form-group">
          <label>
            <input type="checkbox" id="is-active" checked style="width: auto; margin-right: 8px;">
            Link ativo (dispon√≠vel para uso)
          </label>
        </div>

        <input type="hidden" id="edit-id">

        <div class="modal-actions">
          <button type="button" class="btn btn-cancel" onclick="closeModal()">Cancelar</button>
          <button type="submit" class="btn btn-add">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="notifications.js"></script>
  <script src="supabase-client.js"></script>
  <script src="auth.js"></script>
  <script src="router.js"></script>
  <script src="bulk-operations.js"></script>

  <script>
    let currentUser = null;
    let linksData = [];
    let filteredLinks = [];
    let bulkOps = null;

    // Inicializar
    async function init() {
      currentUser = await requirePagePermission("referral-links");
      if (!currentUser) return;

      // Inicializar bulk operations
      bulkOps = new BulkOperations({
        tableName: 'referral_links',
        onSelectionChange: (count) => {
          bulkOps.toggleActionsBar(count > 0);
        }
      });

      // Criar barra de a√ß√µes em lote
      bulkOps.createBulkActionsBar([
        {
          label: 'üóëÔ∏è Excluir Selecionados',
          color: '#e74c3c',
          textColor: '#fff',
          handler: async (ids) => {
            const result = await bulkOps.bulkDelete(supabaseClient, 'referral_links', currentUser.id);
            if (result.success) {
              showNotification(`‚úÖ ${result.deletedCount} link(s) exclu√≠do(s)`, 'success');
              await loadLinks();
            } else {
              showNotification(`‚ùå Erro: ${result.error}`, 'error');
            }
          }
        },
        {
          label: 'üì• Exportar Selecionados',
          color: '#3498db',
          textColor: '#fff',
          handler: (ids) => {
            bulkOps.exportSelectedAsCSV(linksData, `referral-links-${Date.now()}.csv`);
          }
        },
        {
          label: '‚úì Ativar Todos',
          color: '#2ecc71',
          textColor: '#fff',
          handler: async (ids) => {
            const result = await bulkOps.bulkUpdate(supabaseClient, 'referral_links', { is_active: true }, currentUser.id);
            if (result.success) {
              showNotification(`‚úÖ ${result.updatedCount} link(s) ativado(s)`, 'success');
              await loadLinks();
            } else {
              showNotification(`‚ùå Erro: ${result.error}`, 'error');
            }
          }
        },
        {
          label: '‚è∏Ô∏è Desativar Todos',
          color: '#95a5a6',
          textColor: '#fff',
          handler: async (ids) => {
            const result = await bulkOps.bulkUpdate(supabaseClient, 'referral_links', { is_active: false }, currentUser.id);
            if (result.success) {
              showNotification(`‚úÖ ${result.updatedCount} link(s) desativado(s)`, 'success');
              await loadLinks();
            } else {
              showNotification(`‚ùå Erro: ${result.error}`, 'error');
            }
          }
        }
      ]);

      await loadLinks();

      // Auto-refresh a cada 30 segundos
      setInterval(loadLinks, 30000);
    }

    // Carregar links do banco
    async function loadLinks() {
      try {
        const { data, error } = await supabaseClient
          .from("referral_links")
          .select("*")
          .eq("user_id", currentUser.id)
          .order("priority", { ascending: false })
          .order("created_at", { ascending: false });

        if (error) throw error;

        linksData = data || [];
        filteredLinks = linksData;
        updateStatistics();
        renderTable();

      } catch (error) {
        console.error('Erro ao carregar links:', error);
        showNotification(`‚ùå Erro: ${error.message}`, 'error');
      }
    }

    // Atualizar estat√≠sticas
    function updateStatistics() {
      const total = linksData.length;
      const active = linksData.filter(l => l.is_active !== false).length;
      const totalUsage = linksData.reduce((sum, l) => sum + (l.usage_count || 0), 0);

      document.getElementById('stat-total').textContent = total;
      document.getElementById('stat-active').textContent = active;
      document.getElementById('stat-usage').textContent = totalUsage;
      document.getElementById('links-count').textContent = filteredLinks.length;
    }

    // Renderizar tabela
    function renderTable() {
      const container = document.getElementById('links-table-container');

      if (filteredLinks.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
            </svg>
            <h3>${linksData.length === 0 ? 'Nenhum link de indica√ß√£o cadastrado' : 'Nenhum resultado encontrado'}</h3>
            <p>${linksData.length === 0 ? 'Clique em "Adicionar Link" para come√ßar' : 'Tente buscar por outro termo'}</p>
          </div>
        `;
        return;
      }

      const priorityLabels = {
        1: 'Baixa',
        2: 'M√©dia',
        3: 'Alta',
        4: 'Muito Alta',
        5: 'Priorit√°ria'
      };

      const tableId = 'referral-links-table';
      container.innerHTML = `
        <table id="${tableId}">
          <thead>
            <tr>
              <th>Plataforma</th>
              <th>Link</th>
              <th>Descri√ß√£o</th>
              <th>Prioridade</th>
              <th>Usos</th>
              <th>Status</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody>
            ${filteredLinks.map(link => `
              <tr>
                <td><strong style="color: #fff;">${link.platform}</strong></td>
                <td>
                  <span class="link-url" title="${link.url}">${link.url}</span>
                </td>
                <td style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                  ${link.description || '-'}
                </td>
                <td>
                  <span style="color: ${link.priority >= 4 ? '#e74c3c' : link.priority >= 3 ? '#f39c12' : '#95a5a6'}; font-weight: 600;">
                    ${priorityLabels[link.priority] || 'M√©dia'}
                  </span>
                </td>
                <td>
                  <span class="usage-count">
                    üìä ${link.usage_count || 0}
                  </span>
                </td>
                <td>
                  <span class="status-badge ${link.is_active !== false ? 'status-active' : 'status-inactive'}">
                    ${link.is_active !== false ? 'Ativo' : 'Inativo'}
                  </span>
                </td>
                <td>
                  <button class="btn-table btn-copy" onclick="copyLink('${link.url}')" title="Copiar link">
                    üìã
                  </button>
                  <button class="btn-table btn-toggle" onclick="toggleLink('${link.id}', ${link.is_active !== false})">
                    ${link.is_active !== false ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è'}
                  </button>
                  <button class="btn-table btn-edit" onclick="editLink('${link.id}')">
                    ‚úèÔ∏è
                  </button>
                  <button class="btn-table btn-delete" onclick="deleteLink('${link.id}')">
                    üóëÔ∏è
                  </button>
                </td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      `;

      // Inicializar bulk operations na tabela
      bulkOps.init(`#${tableId}`);

      // Adicionar checkboxes √†s linhas
      const rows = document.querySelectorAll(`#${tableId} tbody tr`);
      rows.forEach((row, index) => {
        bulkOps.addCheckboxToRow(row, filteredLinks[index].id);
      });
    }

    // Filtrar links
    function filterLinks() {
      const searchTerm = document.getElementById('search-input').value.toLowerCase();

      if (!searchTerm) {
        filteredLinks = linksData;
      } else {
        filteredLinks = linksData.filter(link =>
          link.platform.toLowerCase().includes(searchTerm) ||
          link.url.toLowerCase().includes(searchTerm) ||
          (link.description && link.description.toLowerCase().includes(searchTerm))
        );
      }

      document.getElementById('links-count').textContent = filteredLinks.length;
      renderTable();
    }

    // Abrir modal de adicionar
    function openAddModal() {
      document.getElementById('modal-title').textContent = '‚ûï Adicionar Link de Indica√ß√£o';
      document.getElementById('link-form').reset();
      document.getElementById('edit-id').value = '';
      document.getElementById('is-active').checked = true;
      document.getElementById('priority').value = '3';
      document.getElementById('link-modal').classList.add('active');
      document.getElementById('platform').focus();
    }

    // Editar link
    async function editLink(id) {
      const link = linksData.find(l => l.id === id);
      if (!link) return;

      document.getElementById('modal-title').textContent = '‚úèÔ∏è Editar Link de Indica√ß√£o';
      document.getElementById('edit-id').value = id;
      document.getElementById('platform').value = link.platform;
      document.getElementById('referral-url').value = link.url;
      document.getElementById('description').value = link.description || '';
      document.getElementById('priority').value = link.priority || 3;
      document.getElementById('is-active').checked = link.is_active !== false;
      document.getElementById('link-modal').classList.add('active');
      document.getElementById('platform').focus();
    }

    // Fechar modal
    function closeModal() {
      document.getElementById('link-modal').classList.remove('active');
    }

    // Salvar link
    async function saveLink(event) {
      event.preventDefault();

      const editId = document.getElementById('edit-id').value;
      const platform = document.getElementById('platform').value.trim();
      const url = document.getElementById('referral-url').value.trim();
      const description = document.getElementById('description').value.trim();
      const priority = parseInt(document.getElementById('priority').value);
      const isActive = document.getElementById('is-active').checked;

      try {
        const linkData = {
          user_id: currentUser.id,
          platform,
          url,
          description: description || null,
          priority,
          is_active: isActive
        };

        if (editId) {
          // Atualizar
          const { error } = await supabaseClient
            .from('referral_links')
            .update(linkData)
            .eq('id', editId)
            .eq('user_id', currentUser.id);

          if (error) throw error;
          showNotification('‚úÖ Link atualizado com sucesso!', 'success');
        } else {
          // Criar novo
          linkData.usage_count = 0;

          const { error } = await supabaseClient
            .from('referral_links')
            .insert([linkData]);

          if (error) throw error;
          showNotification('‚úÖ Link adicionado com sucesso!', 'success');
        }

        closeModal();
        await loadLinks();

      } catch (error) {
        console.error('Erro ao salvar link:', error);
        showNotification(`‚ùå Erro: ${error.message}`, 'error');
      }
    }

    // Copiar link
    function copyLink(url) {
      navigator.clipboard.writeText(url).then(() => {
        showNotification('‚úÖ Link copiado para a √°rea de transfer√™ncia!', 'success');
      }).catch(err => {
        console.error('Erro ao copiar:', err);
        showNotification('‚ùå Erro ao copiar link', 'error');
      });
    }

    // Alternar status do link
    async function toggleLink(id, currentActive) {
      try {
        const { error } = await supabaseClient
          .from('referral_links')
          .update({ is_active: !currentActive })
          .eq('id', id)
          .eq('user_id', currentUser.id);

        if (error) throw error;

        showNotification(`‚úÖ Link ${!currentActive ? 'ativado' : 'desativado'}`, 'success');
        await loadLinks();

      } catch (error) {
        console.error('Erro ao alterar link:', error);
        showNotification(`‚ùå Erro: ${error.message}`, 'error');
      }
    }

    // Excluir link
    async function deleteLink(id) {
      if (!confirm('Confirma a exclus√£o deste link de indica√ß√£o?')) {
        return;
      }

      try {
        const { error } = await supabaseClient
          .from('referral_links')
          .delete()
          .eq('id', id)
          .eq('user_id', currentUser.id);

        if (error) throw error;

        showNotification('‚úÖ Link exclu√≠do', 'success');
        await loadLinks();

      } catch (error) {
        console.error('Erro ao excluir link:', error);
        showNotification(`‚ùå Erro: ${error.message}`, 'error');
      }
    }

    // Excluir todos os links
    async function deleteAllLinks() {
      if (linksData.length === 0) {
        showNotification('‚ö†Ô∏è Nenhum link para excluir', 'warning');
        return;
      }

      if (!confirm(`Confirma a exclus√£o de todos os ${linksData.length} links?`)) {
        return;
      }

      try {
        const { error } = await supabaseClient
          .from('referral_links')
          .delete()
          .eq('user_id', currentUser.id);

        if (error) throw error;

        showNotification('‚úÖ Todos os links foram exclu√≠dos', 'success');
        await loadLinks();

      } catch (error) {
        console.error('Erro ao excluir links:', error);
        showNotification(`‚ùå Erro: ${error.message}`, 'error');
      }
    }

    // Fechar modal ao clicar fora
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('link-modal').addEventListener('click', (e) => {
        if (e.target.id === 'link-modal') {
          closeModal();
        }
      });
    });

    init();
  </script>
</body>
</html>
